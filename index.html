<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MindConnect - Psychology Network Organizer</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
        }

        .header {
            text-align: center;
            color: white;
            margin-bottom: 30px;
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
        }

        .header p {
            font-size: 1.1em;
            opacity: 0.9;
        }

        .main-content {
            display: grid;
            grid-template-columns: 1fr 2fr;
            gap: 20px;
            margin-bottom: 20px;
        }

        .form-section {
            background: white;
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }

        .list-section {
            background: white;
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            color: #333;
            font-weight: 600;
        }

        .form-group input,
        .form-group textarea {
            width: 100%;
            padding: 12px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            font-size: 14px;
            transition: border-color 0.3s;
        }

        .form-group input:focus,
        .form-group textarea:focus {
            outline: none;
            border-color: #667eea;
        }

        .form-group textarea {
            resize: vertical;
            min-height: 80px;
        }

        .btn {
            padding: 12px 24px;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
        }

        .btn-primary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            width: 100%;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
        }

        .btn-secondary {
            background: #f0f0f0;
            color: #333;
            margin-right: 10px;
        }

        .btn-danger {
            background: #ff4757;
            color: white;
        }

        .btn-edit {
            background: #5352ed;
            color: white;
        }

        .btn-fetch {
            background: #0077b5;
            color: white;
            margin-bottom: 10px;
        }

        .btn-fetch:hover {
            background: #005885;
        }

        .url-input-group {
            display: flex;
            gap: 10px;
        }

        .url-input-group input {
            flex: 1;
        }

        .loading {
            display: inline-block;
            width: 16px;
            height: 16px;
            border: 2px solid #ffffff;
            border-radius: 50%;
            border-top-color: transparent;
            animation: spin 0.8s linear infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        .alert {
            padding: 12px;
            border-radius: 8px;
            margin-bottom: 15px;
            font-size: 14px;
        }

        .alert-info {
            background: #e3f2fd;
            color: #1976d2;
            border-left: 4px solid #1976d2;
        }

        .alert-warning {
            background: #fff3e0;
            color: #f57c00;
            border-left: 4px solid #f57c00;
        }

        .search-box {
            margin-bottom: 20px;
        }

        .search-box input {
            width: 100%;
            padding: 12px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            font-size: 14px;
        }

        .search-box input:focus {
            outline: none;
            border-color: #667eea;
        }

        .profile-list {
            max-height: 600px;
            overflow-y: auto;
        }

        .profile-card {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 15px;
            border-left: 4px solid #667eea;
            transition: transform 0.2s;
        }

        .profile-card:hover {
            transform: translateX(5px);
        }

        .profile-card h3 {
            color: #333;
            margin-bottom: 10px;
            font-size: 1.3em;
        }

        .profile-card .info {
            color: #666;
            margin-bottom: 8px;
        }

        .profile-card .info strong {
            color: #333;
        }

        .profile-card .actions {
            margin-top: 15px;
            display: flex;
            gap: 10px;
        }

        .profile-card a {
            color: #0077b5;
            text-decoration: none;
            font-weight: 600;
        }

        .profile-card a:hover {
            text-decoration: underline;
        }

        .empty-state {
            text-align: center;
            padding: 40px;
            color: #999;
        }

        .empty-state p {
            font-size: 1.1em;
        }

        .stats {
            display: flex;
            gap: 15px;
            margin-bottom: 20px;
        }

        .stat-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 15px;
            border-radius: 10px;
            flex: 1;
            text-align: center;
        }

        .stat-card h3 {
            font-size: 2em;
            margin-bottom: 5px;
        }

        .stat-card p {
            opacity: 0.9;
        }

        .tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .tab-btn {
            padding: 12px 24px;
            background: rgba(255, 255, 255, 0.2);
            border: none;
            border-radius: 8px;
            color: white;
            cursor: pointer;
            font-size: 1em;
            transition: all 0.3s;
        }

        .tab-btn:hover {
            background: rgba(255, 255, 255, 0.3);
        }

        .tab-btn.active {
            background: white;
            color: #667eea;
            font-weight: bold;
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        .insight-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px;
            border-radius: 12px;
            margin-bottom: 15px;
        }

        .insight-card h4 {
            margin-bottom: 10px;
        }

        .insight-card p {
            opacity: 0.9;
            line-height: 1.6;
        }

        .collaboration-match {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 10px;
            border-left: 4px solid #4caf50;
        }

        .collaboration-match h4 {
            color: #333;
            margin-bottom: 8px;
        }

        .match-score {
            display: inline-block;
            background: #4caf50;
            color: white;
            padding: 4px 12px;
            border-radius: 12px;
            font-size: 0.9em;
            font-weight: bold;
            margin-left: 10px;
        }

        .export-section {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 12px;
            margin-bottom: 20px;
        }

        .action-item {
            background: white;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 10px;
            border-left: 4px solid #667eea;
        }

        .action-item .date {
            font-size: 0.85em;
            color: #666;
            margin-bottom: 5px;
        }

        .chart-container {
            background: white;
            padding: 20px;
            border-radius: 12px;
            margin-bottom: 20px;
        }

        .bar-chart {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .bar-item {
            display: flex;
            align-items: center;
        }

        .bar-label {
            width: 150px;
            font-weight: 600;
            color: #333;
        }

        .bar-fill {
            flex: 1;
            height: 30px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-radius: 15px;
            display: flex;
            align-items: center;
            justify-content: flex-end;
            padding-right: 10px;
            color: white;
            font-weight: 600;
            min-width: 50px;
        }

        @media (max-width: 768px) {
            .main-content {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ğŸ§  MindConnect</h1>
            <p>Psychology Network Organizer - ì‹¬ë¦¬í•™ ë„¤íŠ¸ì›Œí¬ë¥¼ ì²´ê³„ì ìœ¼ë¡œ ê´€ë¦¬í•˜ì„¸ìš”</p>
        </div>

        <div class="stats">
            <div class="stat-card">
                <h3 id="totalCount">0</h3>
                <p>ì´ í”„ë¡œí•„</p>
            </div>
            <div class="stat-card">
                <h3 id="researcherCount">0</h3>
                <p>ì—°êµ¬ì</p>
            </div>
            <div class="stat-card">
                <h3 id="therapistCount">0</h3>
                <p>ì¹˜ë£Œì‚¬/ìƒë‹´ì‚¬</p>
            </div>
            <div class="stat-card">
                <h3 id="collaborationCount">0</h3>
                <p>í˜‘ì—… ê¸°íšŒ</p>
            </div>
        </div>

        <div class="tabs">
            <button class="tab-btn active" onclick="showTab('network')">ğŸ‘¥ ë„¤íŠ¸ì›Œí¬</button>
            <button class="tab-btn" onclick="showTab('analytics')">ğŸ“Š í†µê³„ & ë¶„ì„</button>
            <button class="tab-btn" onclick="showTab('collaboration')">ğŸ¤ í˜‘ì—… ë§¤ì¹­</button>
            <button class="tab-btn" onclick="showTab('actions')">ğŸ“… í›„ì† ì¡°ì¹˜</button>
            <button class="tab-btn" onclick="showTab('export')">ğŸ’¾ ë‚´ë³´ë‚´ê¸°/ê°€ì ¸ì˜¤ê¸°</button>
        </div>

        <div class="main-content">
            <!-- ë„¤íŠ¸ì›Œí¬ íƒ­ -->
            <div id="network" class="tab-content active">
                <div class="form-section">
                    <h2 style="margin-bottom: 20px; color: #333;">ì‹¬ë¦¬í•™ ì „ë¬¸ê°€ í”„ë¡œí•„ ì¶”ê°€</h2>
                
                <div class="alert alert-info" style="margin-bottom: 20px;">
                    ğŸ’¡ <strong>ë¹ ë¥¸ ì¶”ê°€:</strong> LinkedIn URLì„ ì…ë ¥í•˜ê³  "ì •ë³´ ê°€ì ¸ì˜¤ê¸°"ë¥¼ í´ë¦­í•˜ì„¸ìš”!<br>
                    ğŸ§  ì‹¬ë¦¬í•™ ì—°êµ¬ì, ì¹˜ë£Œì‚¬, ìƒë‹´ì‚¬, ì •ì‹ ê±´ê°• ì „ë¬¸ê°€ë“¤ì˜ í”„ë¡œí•„ì„ ê´€ë¦¬í•©ë‹ˆë‹¤.<br>
                    ğŸ‘¶ <strong>ì•„ë™ì‹¬ë¦¬ ì „ë¬¸ê°€</strong> í”„ë¡œí•„ë„ ì¶”ê°€í•˜ì—¬ ì•„ë™ ì •ì„œ ë°œë‹¬, ë†€ì´ì¹˜ë£Œ, ë¶€ëª¨-ìë…€ ê´€ê³„ ë“± ì „ë¬¸ê°€ ë„¤íŠ¸ì›Œí¬ë¥¼ êµ¬ì¶•í•˜ì„¸ìš”.
                </div>

                <div class="form-group">
                    <label for="quickLinkedInUrl">LinkedIn URLë¡œ ë¹ ë¥´ê²Œ ì¶”ê°€</label>
                    <div class="url-input-group">
                        <input type="url" id="quickLinkedInUrl" placeholder="https://linkedin.com/in/username">
                        <button type="button" class="btn btn-fetch" id="fetchBtn" onclick="fetchLinkedInInfo()">
                            ì •ë³´ ê°€ì ¸ì˜¤ê¸°
                        </button>
                    </div>
                </div>

                <form id="profileForm">
                    <div class="form-group">
                        <label for="name">ì´ë¦„ *</label>
                        <input type="text" id="name" required>
                    </div>
                    <div class="form-group">
                        <label for="company">íšŒì‚¬</label>
                        <input type="text" id="company">
                    </div>
                    <div class="form-group">
                        <label for="position">ì§ì±…</label>
                        <input type="text" id="position" placeholder="ì˜ˆ: ì„ìƒì‹¬ë¦¬ì‚¬, ì—°êµ¬ì›, êµìˆ˜">
                    </div>
                    <div class="form-group">
                        <label for="specialty">ì „ë¬¸ ë¶„ì•¼</label>
                        <input type="text" id="specialty" placeholder="ì˜ˆ: ì„ìƒì‹¬ë¦¬, ìƒë‹´ì‹¬ë¦¬, ì‚°ì—…ì‹¬ë¦¬, ì¸ì§€ì‹¬ë¦¬">
                        <small style="color: #666; font-size: 0.85em; display: block; margin-top: 5px;">
                            ì‰¼í‘œë¡œ êµ¬ë¶„í•˜ì—¬ ì—¬ëŸ¬ ë¶„ì•¼ ì…ë ¥ ê°€ëŠ¥
                        </small>
                    </div>
                    <div class="form-group">
                        <label for="linkedinUrl">LinkedIn URL</label>
                        <input type="url" id="linkedinUrl" placeholder="https://linkedin.com/in/...">
                    </div>
                    <div class="form-group">
                        <label for="notes">ë©”ëª¨ / ì—°êµ¬ ë¶„ì•¼</label>
                        <textarea id="notes" placeholder="ì—°êµ¬ ê´€ì‹¬ì‚¬, í˜‘ì—… ê°€ëŠ¥ ë¶„ì•¼, í•™íšŒ ì°¸ì„ ì´ë ¥ ë“±ì„ ì…ë ¥í•˜ì„¸ìš”"></textarea>
                    </div>
                    <button type="submit" class="btn btn-primary" id="submitBtn">í”„ë¡œí•„ ì €ì¥</button>
                </form>
                </div>

                <div class="list-section">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; flex-wrap: wrap; gap: 10px;">
                        <h2 style="margin: 0; color: #333;">ì‹¬ë¦¬í•™ ë„¤íŠ¸ì›Œí¬</h2>
                        <button onclick="forceLoadDemoData()" style="background: #ffc107; color: #333; border: none; padding: 10px 20px; border-radius: 8px; cursor: pointer; font-weight: 600; font-size: 0.9em;">
                            ğŸ”„ ë°ëª¨ ë°ì´í„° ë‹¤ì‹œ ë¡œë“œ
                        </button>
                    </div>
                    <div class="search-box">
                        <input type="text" id="searchInput" placeholder="ğŸ” ì´ë¦„, íšŒì‚¬, ì§ì±…, ì „ë¬¸ ë¶„ì•¼ë¡œ ê²€ìƒ‰...">
                    </div>
                    <div style="margin-bottom: 15px; display: flex; gap: 10px; flex-wrap: wrap;">
                        <button class="btn btn-secondary" onclick="filterByType('all')" id="filterAll">ì „ì²´</button>
                        <button class="btn btn-secondary" onclick="filterByType('researcher')" id="filterResearcher">ì—°êµ¬ì</button>
                        <button class="btn btn-secondary" onclick="filterByType('therapist')" id="filterTherapist">ì¹˜ë£Œì‚¬/ìƒë‹´ì‚¬</button>
                        <button class="btn btn-secondary" onclick="filterByType('academic')" id="filterAcademic">í•™ê³„</button>
                    </div>
                    <div class="profile-list" id="profileList">
                        <div class="empty-state">
                            <p>ì €ì¥ëœ í”„ë¡œí•„ì´ ì—†ìŠµë‹ˆë‹¤.</p>
                            <p style="margin-top: 10px; font-size: 0.9em;">ìœ„ í¼ì„ ì‚¬ìš©í•˜ì—¬ í”„ë¡œí•„ì„ ì¶”ê°€í•˜ì„¸ìš”.</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- í†µê³„ & ë¶„ì„ íƒ­ -->
            <div id="analytics" class="tab-content">
                <div class="form-section">
                    <h2 style="margin-bottom: 20px; color: #333;">ğŸ“Š ë„¤íŠ¸ì›Œí¬ í†µê³„ & ë¶„ì„</h2>
                    
                    <div class="insight-card">
                        <h4>ğŸ’¡ ë„¤íŠ¸ì›Œí¬ ì¸ì‚¬ì´íŠ¸</h4>
                        <p id="networkInsights">í”„ë¡œí•„ì„ ì¶”ê°€í•˜ë©´ ë„¤íŠ¸ì›Œí¬ ë¶„ì„ ê²°ê³¼ê°€ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤.</p>
                    </div>

                    <div class="chart-container">
                        <h3 style="margin-bottom: 15px; color: #333;">ì „ë¬¸ ë¶„ì•¼ ë¶„í¬</h3>
                        <div id="specialtyChart" class="bar-chart"></div>
                    </div>

                    <div class="chart-container">
                        <h3 style="margin-bottom: 15px; color: #333;">íšŒì‚¬/ê¸°ê´€ ë¶„í¬</h3>
                        <div id="companyChart" class="bar-chart"></div>
                    </div>

                    <div class="chart-container">
                        <h3 style="margin-bottom: 15px; color: #333;">ì§ì±… ë¶„í¬</h3>
                        <div id="positionChart" class="bar-chart"></div>
                    </div>
                </div>
            </div>

            <!-- í˜‘ì—… ë§¤ì¹­ íƒ­ -->
            <div id="collaboration" class="tab-content">
                <div class="form-section">
                    <h2 style="margin-bottom: 20px; color: #333;">ğŸ¤ í˜‘ì—… ê¸°íšŒ ë§¤ì¹­</h2>
                    
                    <div class="insight-card">
                        <h4>ğŸ’¡ í˜‘ì—… ë§¤ì¹­ì´ë€?</h4>
                        <p>ì „ë¬¸ ë¶„ì•¼ì™€ ì—°êµ¬ ê´€ì‹¬ì‚¬ë¥¼ ê¸°ë°˜ìœ¼ë¡œ í˜‘ì—… ê°€ëŠ¥ì„±ì´ ë†’ì€ ì „ë¬¸ê°€ë¥¼ ì¶”ì²œí•©ë‹ˆë‹¤.</p>
                    </div>

                    <div class="form-group">
                        <label>ë‚´ ì „ë¬¸ ë¶„ì•¼ ì…ë ¥</label>
                        <input type="text" id="mySpecialty" placeholder="ì˜ˆ: ì„ìƒì‹¬ë¦¬, ìƒë‹´ì‹¬ë¦¬, ì¸ì§€ì‹¬ë¦¬">
                        <small style="color: #666; font-size: 0.85em; display: block; margin-top: 5px;">
                            ì‰¼í‘œë¡œ êµ¬ë¶„í•˜ì—¬ ì—¬ëŸ¬ ë¶„ì•¼ ì…ë ¥
                        </small>
                    </div>
                    <button class="btn btn-primary" onclick="findCollaborations()">í˜‘ì—… ê¸°íšŒ ì°¾ê¸°</button>

                    <div id="collaborationResults" style="margin-top: 30px;"></div>
                </div>
            </div>

            <!-- í›„ì† ì¡°ì¹˜ íƒ­ -->
            <div id="actions" class="tab-content">
                <div class="form-section">
                    <h2 style="margin-bottom: 20px; color: #333;">ğŸ“… í›„ì† ì¡°ì¹˜ ê´€ë¦¬</h2>
                    
                    <div class="form-group">
                        <label>í”„ë¡œí•„ ì„ íƒ</label>
                        <select id="actionProfile" style="width: 100%; padding: 12px; border: 2px solid #e0e0e0; border-radius: 8px;">
                            <option value="">í”„ë¡œí•„ ì„ íƒ...</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>ì¡°ì¹˜ ìœ í˜•</label>
                        <select id="actionType" style="width: 100%; padding: 12px; border: 2px solid #e0e0e0; border-radius: 8px;">
                            <option value="meeting">ë¯¸íŒ…/íšŒì˜</option>
                            <option value="email">ì´ë©”ì¼</option>
                            <option value="call">ì „í™”</option>
                            <option value="followup">í›„ì† ì¡°ì¹˜</option>
                            <option value="note">ë©”ëª¨</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>ë‚ ì§œ</label>
                        <input type="date" id="actionDate" style="width: 100%; padding: 12px; border: 2px solid #e0e0e0; border-radius: 8px;">
                    </div>
                    <div class="form-group">
                        <label>ë‚´ìš©</label>
                        <textarea id="actionContent" placeholder="í›„ì† ì¡°ì¹˜ ë‚´ìš©ì„ ì…ë ¥í•˜ì„¸ìš”..." style="width: 100%; padding: 12px; border: 2px solid #e0e0e0; border-radius: 8px; min-height: 80px;"></textarea>
                    </div>
                    <button class="btn btn-primary" onclick="addAction()">ì¡°ì¹˜ ì¶”ê°€</button>

                    <div id="actionsList" style="margin-top: 30px;"></div>
                </div>
            </div>

            <!-- ë‚´ë³´ë‚´ê¸°/ê°€ì ¸ì˜¤ê¸° íƒ­ -->
            <div id="export" class="tab-content">
                <div class="form-section">
                    <h2 style="margin-bottom: 20px; color: #333;">ğŸ’¾ ë°ì´í„° ê´€ë¦¬</h2>
                    
                    <div class="export-section">
                        <h3 style="margin-bottom: 15px; color: #333;">ğŸ“¤ ë‚´ë³´ë‚´ê¸°</h3>
                        <p style="color: #666; margin-bottom: 15px;">í”„ë¡œí•„ ë°ì´í„°ë¥¼ ë°±ì—…í•˜ê±°ë‚˜ ë‹¤ë¥¸ ê³³ì—ì„œ ì‚¬ìš©í•  ìˆ˜ ìˆë„ë¡ ë‚´ë³´ë‚¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
                        <button class="btn btn-primary" onclick="exportData('json')" style="margin-right: 10px;">JSONìœ¼ë¡œ ë‚´ë³´ë‚´ê¸°</button>
                        <button class="btn btn-primary" onclick="exportData('csv')">CSVë¡œ ë‚´ë³´ë‚´ê¸°</button>
                    </div>

                    <div class="export-section">
                        <h3 style="margin-bottom: 15px; color: #333;">ğŸ“¥ ê°€ì ¸ì˜¤ê¸°</h3>
                        <p style="color: #666; margin-bottom: 15px;">ì´ì „ì— ë‚´ë³´ë‚¸ ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¬ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
                        <div class="form-group">
                            <label>JSON íŒŒì¼ ì„ íƒ</label>
                            <input type="file" id="importFile" accept=".json" style="width: 100%; padding: 12px; border: 2px solid #e0e0e0; border-radius: 8px;">
                        </div>
                        <button class="btn btn-primary" onclick="importData()">ë°ì´í„° ê°€ì ¸ì˜¤ê¸°</button>
                    </div>

                    <div class="export-section" style="background: #fff3cd; border-left: 4px solid #ffc107;">
                        <h3 style="margin-bottom: 15px; color: #856404;">âš ï¸ ë°ì´í„° ì´ˆê¸°í™”</h3>
                        <p style="color: #856404; margin-bottom: 15px;">ëª¨ë“  í”„ë¡œí•„ ë°ì´í„°ë¥¼ ì‚­ì œí•©ë‹ˆë‹¤. ì‹ ì¤‘í•˜ê²Œ ì‚¬ìš©í•˜ì„¸ìš”.</p>
                        <button class="btn btn-danger" onclick="clearAllData()">ëª¨ë“  ë°ì´í„° ì‚­ì œ</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // ë°ì´í„° ì €ì¥ì†Œ (ë¡œì»¬ ìŠ¤í† ë¦¬ì§€)
        let profiles = [];
        let editingId = null;
        let currentFilter = 'all';

        // ë°ëª¨ ë°ì´í„° ì´ˆê¸°í™” (í”„ë¡œí•„ì´ ì—†ì„ ë•Œë§Œ)
        function initDemoData() {
            // localStorageì—ì„œ ë‹¤ì‹œ ì½ì–´ì˜¤ê¸°
            const stored = localStorage.getItem('linkedinProfiles');
            let hasValidData = false;
            
            if (stored) {
                try {
                    const parsed = JSON.parse(stored);
                    if (Array.isArray(parsed) && parsed.length > 0) {
                        // ìœ íš¨í•œ í”„ë¡œí•„ ë°ì´í„°ê°€ ìˆëŠ”ì§€ í™•ì¸ (ìµœì†Œí•œ name ì†ì„±ì´ ìˆì–´ì•¼ í•¨)
                        const validProfiles = parsed.filter(p => p && p.name && p.name.trim() !== '');
                        if (validProfiles.length > 0) {
                            profiles = validProfiles;
                            hasValidData = true;
                        }
                    }
                } catch (e) {
                    console.error('í”„ë¡œí•„ ë°ì´í„° íŒŒì‹± ì˜¤ë¥˜:', e);
                    // íŒŒì‹± ì˜¤ë¥˜ ì‹œ localStorage ì´ˆê¸°í™”
                    localStorage.removeItem('linkedinProfiles');
                }
            }
            
            // í”„ë¡œí•„ì´ ì—†ê±°ë‚˜ ìœ íš¨í•˜ì§€ ì•Šìœ¼ë©´ ë°ëª¨ ë°ì´í„° ë¡œë“œ
            if (!hasValidData && (!profiles || profiles.length === 0)) {
                const demoProfiles = [
                    {
                        id: '1',
                        name: 'ê¹€ë¯¼ìˆ˜',
                        company: 'ì„œìš¸ëŒ€í•™êµ ì‹¬ë¦¬í•™ê³¼',
                        position: 'êµìˆ˜',
                        specialty: 'ì¸ì§€ì‹¬ë¦¬, ì‹¤í—˜ì‹¬ë¦¬',
                        linkedinUrl: 'https://linkedin.com/in/demo1',
                        notes: 'ì¸ì§€ ë°œë‹¬ ì—°êµ¬, ì•„ë™ í•™ìŠµ ëŠ¥ë ¥ ì—°êµ¬ ì „ë¬¸ê°€',
                        createdAt: new Date().toISOString()
                    },
                    {
                        id: '2',
                        name: 'ì´ì§€ì€',
                        company: 'ì—°ì„¸ëŒ€í•™êµë³‘ì›',
                        position: 'ì„ìƒì‹¬ë¦¬ì‚¬',
                        specialty: 'ì„ìƒì‹¬ë¦¬, ìƒë‹´ì‹¬ë¦¬',
                        linkedinUrl: 'https://linkedin.com/in/demo2',
                        notes: 'ìš°ìš¸ì¦, ë¶ˆì•ˆì¥ì•  ì¹˜ë£Œ ì „ë¬¸, CBT ì „ë¬¸ê°€',
                        createdAt: new Date().toISOString()
                    },
                    {
                        id: '3',
                        name: 'ë°•ì¤€í˜¸',
                        company: 'í•œêµ­ê³¼í•™ê¸°ìˆ ì› (KAIST)',
                        position: 'ì—°êµ¬ì›',
                        specialty: 'ì¸ì§€ì‹ ê²½ê³¼í•™, ë‡Œê³¼í•™',
                        linkedinUrl: 'https://linkedin.com/in/demo3',
                        notes: 'fMRIë¥¼ í™œìš©í•œ ì¸ì§€ ê³¼ì • ì—°êµ¬, ë©”ëª¨ë¦¬ ë©”ì»¤ë‹ˆì¦˜ ì—°êµ¬',
                        createdAt: new Date().toISOString()
                    },
                    {
                        id: '4',
                        name: 'ìµœìˆ˜ì§„',
                        company: 'ì‚¼ì„±ì„œìš¸ë³‘ì› ì •ì‹ ê±´ê°•ì˜í•™ê³¼',
                        position: 'ìƒë‹´ì‹¬ë¦¬ì‚¬',
                        specialty: 'ìƒë‹´ì‹¬ë¦¬, ê°€ì¡±ì¹˜ë£Œ',
                        linkedinUrl: 'https://linkedin.com/in/demo4',
                        notes: 'ê°€ì¡± ìƒë‹´, ë¶€ë¶€ ì¹˜ë£Œ ì „ë¬¸, ì§‘ë‹¨ ì¹˜ë£Œ ê²½ë ¥ 10ë…„',
                        createdAt: new Date().toISOString()
                    },
                    {
                        id: '5',
                        name: 'ì •í˜„ìš°',
                        company: 'ê³ ë ¤ëŒ€í•™êµ ì‹¬ë¦¬í•™ê³¼',
                        position: 'ë¶€êµìˆ˜',
                        specialty: 'ì‚¬íšŒì‹¬ë¦¬, ì‚°ì—…ì‹¬ë¦¬',
                        linkedinUrl: 'https://linkedin.com/in/demo5',
                        notes: 'ì¡°ì§ ì‹¬ë¦¬, ë¦¬ë”ì‹­ ì—°êµ¬, ê¸°ì—… ì»¨ì„¤íŒ… ê²½ë ¥',
                        createdAt: new Date().toISOString()
                    },
                    {
                        id: '6',
                        name: 'í•œì†Œì˜',
                        company: 'ì„œìš¸ì•„ì‚°ë³‘ì›',
                        position: 'ì„ìƒì‹¬ë¦¬ì‚¬',
                        specialty: 'ì„ìƒì‹¬ë¦¬, ì•„ë™ì‹¬ë¦¬',
                        linkedinUrl: 'https://linkedin.com/in/demo6',
                        notes: 'ì•„ë™ ë°œë‹¬ ì¥ì• , ADHD ì¹˜ë£Œ ì „ë¬¸ê°€, ì•„ë™ ê°ì • ì¡°ì ˆ ìƒë‹´',
                        createdAt: new Date().toISOString()
                    },
                    {
                        id: '7',
                        name: 'ìœ¤íƒœì˜',
                        company: 'í¬ìŠ¤í… (POSTECH)',
                        position: 'ì—°êµ¬êµìˆ˜',
                        specialty: 'ì¸ì§€ì‹¬ë¦¬, ì¸ê³µì§€ëŠ¥',
                        linkedinUrl: 'https://linkedin.com/in/demo7',
                        notes: 'AIì™€ ì¸ì§€ê³¼í•™ ìœµí•© ì—°êµ¬, ê¸°ê³„í•™ìŠµ ì‹¬ë¦¬ ëª¨ë¸ë§',
                        createdAt: new Date().toISOString()
                    },
                    {
                        id: '8',
                        name: 'ê°•ë¯¸ë¼',
                        company: 'ì´í™”ì—¬ìëŒ€í•™êµ',
                        position: 'êµìˆ˜',
                        specialty: 'ë°œë‹¬ì‹¬ë¦¬, êµìœ¡ì‹¬ë¦¬',
                        linkedinUrl: 'https://linkedin.com/in/demo8',
                        notes: 'ì²­ì†Œë…„ ë°œë‹¬, êµìœ¡ ì •ì±… ì—°êµ¬, í•™íšŒ ì´ì‚¬',
                        createdAt: new Date().toISOString()
                    },
                    {
                        id: '9',
                        name: 'ì¡°ì„±ë¯¼',
                        company: 'ì„œìš¸ëŒ€í•™êµë³‘ì›',
                        position: 'ì„ìƒì‹¬ë¦¬ì‚¬',
                        specialty: 'ì„ìƒì‹¬ë¦¬, íŠ¸ë¼ìš°ë§ˆ ì¹˜ë£Œ',
                        linkedinUrl: 'https://linkedin.com/in/demo9',
                        notes: 'PTSD ì¹˜ë£Œ, EMDR ì „ë¬¸ê°€, ì™¸ìƒ í›„ ìŠ¤íŠ¸ë ˆìŠ¤ ì—°êµ¬',
                        createdAt: new Date().toISOString()
                    },
                    {
                        id: '10',
                        name: 'ì„ë™ìš±',
                        company: 'í•œêµ­ê³¼í•™ê¸°ìˆ ì—°êµ¬ì› (KIST)',
                        position: 'ì„ ì„ì—°êµ¬ì›',
                        specialty: 'ì¸ì§€ì‹ ê²½ê³¼í•™, ë‡Œì˜ìƒ',
                        linkedinUrl: 'https://linkedin.com/in/demo10',
                        notes: 'ë‡ŒíŒŒ ë¶„ì„, ì¸ì§€ ê¸°ëŠ¥ í‰ê°€, ì‹ ê²½ê³¼í•™ ì—°êµ¬',
                        createdAt: new Date().toISOString()
                    },
                    {
                        id: '11',
                        name: 'ì†¡ë¯¸ê²½',
                        company: 'ì„œìš¸ëŒ€í•™êµ ì•„ë™í•™ê³¼',
                        position: 'êµìˆ˜',
                        specialty: 'ì•„ë™ì‹¬ë¦¬, ë°œë‹¬ì‹¬ë¦¬',
                        linkedinUrl: 'https://linkedin.com/in/song-mikyung',
                        notes: 'ì•„ë™ ì •ì„œ ë°œë‹¬, ì• ì°© ì´ë¡  ì—°êµ¬, ë¶€ëª¨-ìë…€ ê´€ê³„ ì „ë¬¸ê°€, í•™íšŒ ì´ì‚¬',
                        createdAt: new Date().toISOString()
                    },
                    {
                        id: '12',
                        name: 'ì˜¤ì§€í›ˆ',
                        company: 'ì„œìš¸ì•„ë™ë³‘ì›',
                        position: 'ì•„ë™ì‹¬ë¦¬ì¹˜ë£Œì‚¬',
                        specialty: 'ì•„ë™ì‹¬ë¦¬, ë†€ì´ì¹˜ë£Œ',
                        linkedinUrl: 'https://linkedin.com/in/oh-jihoon',
                        notes: 'ë†€ì´ì¹˜ë£Œ ì „ë¬¸ê°€, ì•„ë™ íŠ¸ë¼ìš°ë§ˆ ì¹˜ë£Œ, ì‚¬íšŒì„± ë°œë‹¬ ìƒë‹´, 15ë…„ ê²½ë ¥',
                        createdAt: new Date().toISOString()
                    },
                    {
                        id: '13',
                        name: 'ìœ¤ì„œì—°',
                        company: 'ì´í™”ì—¬ìëŒ€í•™êµ ì•„ë™ì‹¬ë¦¬ì—°êµ¬ì†Œ',
                        position: 'ì—°êµ¬ì›',
                        specialty: 'ì•„ë™ì‹¬ë¦¬, êµìœ¡ì‹¬ë¦¬',
                        linkedinUrl: 'https://linkedin.com/in/yoon-seoyeon',
                        notes: 'ì•„ë™ í•™ìŠµ ì‹¬ë¦¬, ìì¡´ê° í–¥ìƒ í”„ë¡œê·¸ë¨ ê°œë°œ, í•™êµ ì ì‘ ìƒë‹´ ì „ë¬¸ê°€',
                        createdAt: new Date().toISOString()
                    },
                    {
                        id: '14',
                        name: 'ê¹€íƒœí˜„',
                        company: 'ì—°ì„¸ëŒ€í•™êµë³‘ì› ì†Œì•„ì •ì‹ ê³¼',
                        position: 'ì„ìƒì‹¬ë¦¬ì‚¬',
                        specialty: 'ì•„ë™ì‹¬ë¦¬, ì²­ì†Œë…„ì‹¬ë¦¬',
                        linkedinUrl: 'https://linkedin.com/in/kim-taehyun',
                        notes: 'ì²­ì†Œë…„ ìš°ìš¸ì¦, ë¶ˆì•ˆì¥ì•  ì¹˜ë£Œ, ê°€ì¡± ìƒë‹´ ì „ë¬¸ê°€, CBT ì „ë¬¸',
                        createdAt: new Date().toISOString()
                    },
                    {
                        id: '15',
                        name: 'ë°•ìˆ˜ì§„',
                        company: 'í•œêµ­ì•„ë™ì‹¬ë¦¬ìƒë‹´ì„¼í„°',
                        position: 'ìƒë‹´ì‹¬ë¦¬ì‚¬',
                        specialty: 'ì•„ë™ì‹¬ë¦¬, ê°€ì¡±ìƒë‹´',
                        linkedinUrl: 'https://linkedin.com/in/park-sujin',
                        notes: 'ì•„ë™ í–‰ë™ ë¬¸ì œ, ê°ì • ì¡°ì ˆ ìƒë‹´, ë¶€ëª¨ êµìœ¡ í”„ë¡œê·¸ë¨ ìš´ì˜',
                        createdAt: new Date().toISOString()
                    },
                    {
                        id: '16',
                        name: 'ì´í˜„ìˆ˜',
                        company: 'ê³ ë ¤ëŒ€í•™êµ ì‹¬ë¦¬í•™ê³¼',
                        position: 'êµìˆ˜',
                        specialty: 'ì„ìƒì‹¬ë¦¬, ì¸ì§€í–‰ë™ì¹˜ë£Œ',
                        linkedinUrl: 'https://linkedin.com/in/lee-hyunsu',
                        notes: 'CBT ì „ë¬¸ê°€, ìš°ìš¸ì¦ ì¹˜ë£Œ ì—°êµ¬, ì¸ì§€ ì™œê³¡ ì—°êµ¬, í•™íšŒ íšŒì¥',
                        createdAt: new Date().toISOString()
                    },
                    {
                        id: '17',
                        name: 'ìµœì˜í¬',
                        company: 'ì„œìš¸ëŒ€í•™êµë³‘ì› ì •ì‹ ê±´ê°•ì˜í•™ê³¼',
                        position: 'ì„ìƒì‹¬ë¦¬ì‚¬',
                        specialty: 'ì„ìƒì‹¬ë¦¬, íŠ¸ë¼ìš°ë§ˆ ì¹˜ë£Œ',
                        linkedinUrl: 'https://linkedin.com/in/choi-younghee',
                        notes: 'PTSD ì¹˜ë£Œ, EMDR ì „ë¬¸ê°€, ì™¸ìƒ í›„ ìŠ¤íŠ¸ë ˆìŠ¤ ì—°êµ¬, 20ë…„ ê²½ë ¥',
                        createdAt: new Date().toISOString()
                    },
                    {
                        id: '18',
                        name: 'ì •ë¯¼í˜¸',
                        company: 'í•œêµ­ê³¼í•™ê¸°ìˆ ì› (KAIST)',
                        position: 'ì—°êµ¬êµìˆ˜',
                        specialty: 'ì¸ì§€ì‹¬ë¦¬, ì¸ê³µì§€ëŠ¥',
                        linkedinUrl: 'https://linkedin.com/in/jung-minho',
                        notes: 'AIì™€ ì¸ì§€ê³¼í•™ ìœµí•© ì—°êµ¬, ê¸°ê³„í•™ìŠµ ì‹¬ë¦¬ ëª¨ë¸ë§, ë‡Œ-ì»´í“¨í„° ì¸í„°í˜ì´ìŠ¤',
                        createdAt: new Date().toISOString()
                    },
                    {
                        id: '19',
                        name: 'í•œì§€ì˜',
                        company: 'ì‚¼ì„±ì„œìš¸ë³‘ì› ì •ì‹ ê±´ê°•ì˜í•™ê³¼',
                        position: 'ìƒë‹´ì‹¬ë¦¬ì‚¬',
                        specialty: 'ìƒë‹´ì‹¬ë¦¬, ê°€ì¡±ì¹˜ë£Œ',
                        linkedinUrl: 'https://linkedin.com/in/han-jiyoung',
                        notes: 'ê°€ì¡± ìƒë‹´, ë¶€ë¶€ ì¹˜ë£Œ ì „ë¬¸, ì§‘ë‹¨ ì¹˜ë£Œ ê²½ë ¥ 12ë…„, êµ¬ì¡°ì  ê°€ì¡±ì¹˜ë£Œ',
                        createdAt: new Date().toISOString()
                    },
                    {
                        id: '20',
                        name: 'ê¹€ë„í˜„',
                        company: 'ì„œìš¸ëŒ€í•™êµ ì‹¬ë¦¬í•™ê³¼',
                        position: 'ë¶€êµìˆ˜',
                        specialty: 'ì‚¬íšŒì‹¬ë¦¬, ì‚°ì—…ì‹¬ë¦¬',
                        linkedinUrl: 'https://linkedin.com/in/kim-dohyun',
                        notes: 'ì¡°ì§ ì‹¬ë¦¬, ë¦¬ë”ì‹­ ì—°êµ¬, ê¸°ì—… ì»¨ì„¤íŒ… ê²½ë ¥, íŒ€ì›Œí¬ ì—°êµ¬',
                        createdAt: new Date().toISOString()
                    },
                    {
                        id: '21',
                        name: 'ì´ìˆ˜ì§„',
                        company: 'ì´í™”ì—¬ìëŒ€í•™êµ ì‹¬ë¦¬í•™ê³¼',
                        position: 'êµìˆ˜',
                        specialty: 'ë°œë‹¬ì‹¬ë¦¬, êµìœ¡ì‹¬ë¦¬',
                        linkedinUrl: 'https://linkedin.com/in/lee-sujin',
                        notes: 'ì²­ì†Œë…„ ë°œë‹¬, êµìœ¡ ì •ì±… ì—°êµ¬, í•™íšŒ ì´ì‚¬, í•™ìŠµ ë™ê¸° ì—°êµ¬',
                        createdAt: new Date().toISOString()
                    },
                    {
                        id: '22',
                        name: 'ë°•ì¤€ì„œ',
                        company: 'ì„œìš¸ì•„ì‚°ë³‘ì›',
                        position: 'ì„ìƒì‹¬ë¦¬ì‚¬',
                        specialty: 'ì„ìƒì‹¬ë¦¬, ì•„ë™ì‹¬ë¦¬',
                        linkedinUrl: 'https://linkedin.com/in/park-junseo',
                        notes: 'ì•„ë™ ë°œë‹¬ ì¥ì• , ADHD ì¹˜ë£Œ ì „ë¬¸ê°€, ì¸ì§€ ì¬í™œ í”„ë¡œê·¸ë¨ ê°œë°œ',
                        createdAt: new Date().toISOString()
                    },
                    {
                        id: '23',
                        name: 'ìœ¤ë¯¸ë¼',
                        company: 'í¬ìŠ¤í… (POSTECH)',
                        position: 'ì—°êµ¬êµìˆ˜',
                        specialty: 'ì¸ì§€ì‹¬ë¦¬, ì¸ê³µì§€ëŠ¥',
                        linkedinUrl: 'https://linkedin.com/in/yoon-mira',
                        notes: 'AIì™€ ì¸ì§€ê³¼í•™ ìœµí•© ì—°êµ¬, ê¸°ê³„í•™ìŠµ ì‹¬ë¦¬ ëª¨ë¸ë§, ë”¥ëŸ¬ë‹ ì‹¬ë¦¬í•™',
                        createdAt: new Date().toISOString()
                    },
                    {
                        id: '24',
                        name: 'ì¡°ì„±ìš°',
                        company: 'ì„œìš¸ëŒ€í•™êµë³‘ì›',
                        position: 'ì„ìƒì‹¬ë¦¬ì‚¬',
                        specialty: 'ì„ìƒì‹¬ë¦¬, íŠ¸ë¼ìš°ë§ˆ ì¹˜ë£Œ',
                        linkedinUrl: 'https://linkedin.com/in/cho-sungwoo',
                        notes: 'PTSD ì¹˜ë£Œ, EMDR ì „ë¬¸ê°€, ì™¸ìƒ í›„ ìŠ¤íŠ¸ë ˆìŠ¤ ì—°êµ¬, êµ°ì¸ íŠ¸ë¼ìš°ë§ˆ ì¹˜ë£Œ',
                        createdAt: new Date().toISOString()
                    },
                    {
                        id: '25',
                        name: 'ê°•ë¯¼ì§€',
                        company: 'í•œêµ­ê³¼í•™ê¸°ìˆ ì—°êµ¬ì› (KIST)',
                        position: 'ì„ ì„ì—°êµ¬ì›',
                        specialty: 'ì¸ì§€ì‹ ê²½ê³¼í•™, ë‡Œì˜ìƒ',
                        linkedinUrl: 'https://linkedin.com/in/kang-minji',
                        notes: 'ë‡ŒíŒŒ ë¶„ì„, ì¸ì§€ ê¸°ëŠ¥ í‰ê°€, ì‹ ê²½ê³¼í•™ ì—°êµ¬, fMRI ì—°êµ¬',
                        createdAt: new Date().toISOString()
                    },
                    {
                        id: '26',
                        name: 'ì„ì„œí˜„',
                        company: 'ì—°ì„¸ëŒ€í•™êµ ì‹¬ë¦¬í•™ê³¼',
                        position: 'êµìˆ˜',
                        specialty: 'ì„ìƒì‹¬ë¦¬, ìƒë‹´ì‹¬ë¦¬',
                        linkedinUrl: 'https://linkedin.com/in/lim-seohyun',
                        notes: 'ìš°ìš¸ì¦, ë¶ˆì•ˆì¥ì•  ì¹˜ë£Œ ì „ë¬¸, CBT ì „ë¬¸ê°€, ì¸ì§€ í–‰ë™ ì¹˜ë£Œ ì—°êµ¬',
                        createdAt: new Date().toISOString()
                    },
                    {
                        id: '27',
                        name: 'í™ì§€í›ˆ',
                        company: 'ê³ ë ¤ëŒ€í•™êµë³‘ì› ì •ì‹ ê±´ê°•ì˜í•™ê³¼',
                        position: 'ì„ìƒì‹¬ë¦¬ì‚¬',
                        specialty: 'ì„ìƒì‹¬ë¦¬, ì•„ë™ì‹¬ë¦¬',
                        linkedinUrl: 'https://linkedin.com/in/hong-jihoon',
                        notes: 'ì•„ë™ ë°œë‹¬ ì¥ì• , ADHD ì¹˜ë£Œ ì „ë¬¸ê°€, í•™ìŠµ ì¥ì•  ìƒë‹´, ë¶€ëª¨ êµìœ¡',
                        createdAt: new Date().toISOString()
                    },
                    {
                        id: '28',
                        name: 'ì„œìœ ì§„',
                        company: 'ì´í™”ì—¬ìëŒ€í•™êµ',
                        position: 'êµìˆ˜',
                        specialty: 'ë°œë‹¬ì‹¬ë¦¬, êµìœ¡ì‹¬ë¦¬',
                        linkedinUrl: 'https://linkedin.com/in/seo-yujin',
                        notes: 'ì²­ì†Œë…„ ë°œë‹¬, êµìœ¡ ì •ì±… ì—°êµ¬, í•™íšŒ ì´ì‚¬, í•™êµ ì ì‘ í”„ë¡œê·¸ë¨',
                        createdAt: new Date().toISOString()
                    },
                    {
                        id: '29',
                        name: 'ë°°ì¤€í˜¸',
                        company: 'ì„œìš¸ëŒ€í•™êµë³‘ì›',
                        position: 'ì„ìƒì‹¬ë¦¬ì‚¬',
                        specialty: 'ì„ìƒì‹¬ë¦¬, íŠ¸ë¼ìš°ë§ˆ ì¹˜ë£Œ',
                        linkedinUrl: 'https://linkedin.com/in/bae-junho',
                        notes: 'PTSD ì¹˜ë£Œ, EMDR ì „ë¬¸ê°€, ì™¸ìƒ í›„ ìŠ¤íŠ¸ë ˆìŠ¤ ì—°êµ¬, ì¬ë‚œ ì‹¬ë¦¬ ì§€ì›',
                        createdAt: new Date().toISOString()
                    },
                    {
                        id: '30',
                        name: 'ì‹ í˜œì§„',
                        company: 'í•œêµ­ê³¼í•™ê¸°ìˆ ì› (KAIST)',
                        position: 'ì—°êµ¬ì›',
                        specialty: 'ì¸ì§€ì‹¬ë¦¬, ì‹¤í—˜ì‹¬ë¦¬',
                        linkedinUrl: 'https://linkedin.com/in/shin-hyejin',
                        notes: 'ì¸ì§€ ë°œë‹¬ ì—°êµ¬, ì•„ë™ í•™ìŠµ ëŠ¥ë ¥ ì—°êµ¬ ì „ë¬¸ê°€, ë©”ëª¨ë¦¬ ì—°êµ¬',
                        createdAt: new Date().toISOString()
                    }
                ];
                
                profiles = demoProfiles;
                localStorage.setItem('linkedinProfiles', JSON.stringify(profiles));
                console.log('ë°ëª¨ í”„ë¡œí•„ ë¡œë“œ ì™„ë£Œ:', profiles.length, 'ê°œ');
            }
        }
        
        // ê°•ì œë¡œ ë°ëª¨ ë°ì´í„° ë¡œë“œ (ë””ë²„ê¹…ìš©)
        function forceLoadDemoData() {
            if (confirm('ëª¨ë“  í”„ë¡œí•„ì„ ì‚­ì œí•˜ê³  ë°ëª¨ ë°ì´í„°ë¥¼ ë‹¤ì‹œ ë¡œë“œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) {
                localStorage.removeItem('linkedinProfiles');
                profiles = [];
                initDemoData();
                loadProfiles();
                alert('ë°ëª¨ ë°ì´í„°ê°€ ë¡œë“œë˜ì—ˆìŠµë‹ˆë‹¤!');
            }
        }

        // í˜ì´ì§€ ë¡œë“œ ì‹œ í”„ë¡œí•„ ëª©ë¡ í‘œì‹œ
        function loadProfiles() {
            console.log('loadProfiles() ì‹œì‘');
            
            // ë¨¼ì € localStorageì—ì„œ ë°ì´í„° ì½ê¸°
            const stored = localStorage.getItem('linkedinProfiles');
            let hasValidData = false;
            
            if (stored) {
                try {
                    const parsed = JSON.parse(stored);
                    if (Array.isArray(parsed) && parsed.length > 0) {
                        const validProfiles = parsed.filter(p => p && p.name && p.name.trim() !== '');
                        if (validProfiles.length > 0) {
                            profiles = validProfiles;
                            hasValidData = true;
                            console.log('localStorageì—ì„œ í”„ë¡œí•„ ë¡œë“œ:', profiles.length, 'ê°œ');
                        } else {
                            console.log('ìœ íš¨í•œ í”„ë¡œí•„ì´ ì—†ìŒ (nameì´ ì—†ëŠ” í”„ë¡œí•„ë“¤)');
                        }
                    } else {
                        console.log('localStorageì— ë¹ˆ ë°°ì—´ ë˜ëŠ” ìœ íš¨í•˜ì§€ ì•Šì€ ë°ì´í„°');
                    }
                } catch (e) {
                    console.error('í”„ë¡œí•„ ë°ì´í„° íŒŒì‹± ì˜¤ë¥˜:', e);
                    localStorage.removeItem('linkedinProfiles');
                }
            } else {
                console.log('localStorageì— ë°ì´í„° ì—†ìŒ');
            }
            
            // ìœ íš¨í•œ ë°ì´í„°ê°€ ì—†ìœ¼ë©´ ë¬´ì¡°ê±´ ë°ëª¨ ë°ì´í„° ë¡œë“œ
            if (!hasValidData || !profiles || profiles.length === 0) {
                console.log('ë°ëª¨ ë°ì´í„° ë¡œë“œ ì‹œì‘');
                // localStorage ì™„ì „ ì´ˆê¸°í™” (ì˜ëª»ëœ ë°ì´í„° ì œê±°)
                localStorage.removeItem('linkedinProfiles');
                profiles = [];
                
                // ë°ëª¨ ë°ì´í„° ì§ì ‘ ë¡œë“œ
                initDemoData();
                
                // localStorageì—ì„œ ë‹¤ì‹œ ì½ê¸°
                const storedAfter = localStorage.getItem('linkedinProfiles');
                if (storedAfter) {
                    try {
                        const parsed = JSON.parse(storedAfter);
                        if (Array.isArray(parsed) && parsed.length > 0) {
                            profiles = parsed;
                            console.log('ë°ëª¨ ë°ì´í„° ë¡œë“œ ì™„ë£Œ:', profiles.length, 'ê°œ');
                        } else {
                            console.error('ë°ëª¨ ë°ì´í„°ê°€ ì œëŒ€ë¡œ ì €ì¥ë˜ì§€ ì•ŠìŒ');
                        }
                    } catch (e) {
                        console.error('ë°ëª¨ ë°ì´í„° íŒŒì‹± ì˜¤ë¥˜:', e);
                    }
                } else {
                    console.error('ë°ëª¨ ë°ì´í„°ê°€ localStorageì— ì €ì¥ë˜ì§€ ì•ŠìŒ');
                }
            }
            
            // ìµœì¢… í™•ì¸: ì—¬ì „íˆ í”„ë¡œí•„ì´ ì—†ìœ¼ë©´ ì—ëŸ¬ ë©”ì‹œì§€
            if (!profiles || profiles.length === 0) {
                console.error('í”„ë¡œí•„ ë¡œë“œ ì‹¤íŒ¨ - í”„ë¡œí•„ì´ ì—†ìŠµë‹ˆë‹¤!');
                alert('í”„ë¡œí•„ì„ ë¶ˆëŸ¬ì˜¤ëŠ” ë° ë¬¸ì œê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤. í˜ì´ì§€ë¥¼ ìƒˆë¡œê³ ì¹¨í•˜ê±°ë‚˜ "ë°ëª¨ ë°ì´í„° ë‹¤ì‹œ ë¡œë“œ" ë²„íŠ¼ì„ í´ë¦­í•´ì£¼ì„¸ìš”.');
            } else {
                console.log('ìµœì¢… í”„ë¡œí•„ ìˆ˜:', profiles.length, 'ê°œ');
            }
            
            // í”„ë¡œí•„ í‘œì‹œ
            displayProfiles(profiles);
            updateStats();
            updateActionProfileSelect();
        }

        // íƒ­ ì „í™˜
        function showTab(tabName) {
            document.querySelectorAll('.tab-content').forEach(tab => {
                tab.classList.remove('active');
            });
            document.querySelectorAll('.tab-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            document.getElementById(tabName).classList.add('active');
            event.target.classList.add('active');
            
            if (tabName === 'analytics') {
                loadAnalytics();
            } else if (tabName === 'actions') {
                loadActions();
                updateActionProfileSelect();
            }
        }

        // í”„ë¡œí•„ ëª©ë¡ í‘œì‹œ
        function displayProfiles(profilesToShow) {
            const profileList = document.getElementById('profileList');
            
            // profilesToShowê°€ ì—†ê±°ë‚˜ ë¹ˆ ë°°ì—´ì´ë©´ profiles ì‚¬ìš©
            if (!profilesToShow || profilesToShow.length === 0) {
                profilesToShow = profiles || [];
            }
            
            // ì—¬ì „íˆ ì—†ìœ¼ë©´ ë°ëª¨ ë°ì´í„° ê°•ì œ ë¡œë“œ
            if (profilesToShow.length === 0) {
                console.log('í‘œì‹œí•  í”„ë¡œí•„ì´ ì—†ì–´ì„œ ë°ëª¨ ë°ì´í„°ë¥¼ ë¡œë“œí•©ë‹ˆë‹¤.');
                initDemoData();
                // localStorageì—ì„œ ë‹¤ì‹œ ì½ê¸°
                const stored = localStorage.getItem('linkedinProfiles');
                if (stored) {
                    try {
                        profilesToShow = JSON.parse(stored);
                        profiles = profilesToShow;
                    } catch (e) {
                        console.error('ë°ì´í„° íŒŒì‹± ì˜¤ë¥˜:', e);
                    }
                }
            }
            
            if (profilesToShow.length === 0) {
                profileList.innerHTML = `
                    <div class="empty-state">
                        <p>ì €ì¥ëœ í”„ë¡œí•„ì´ ì—†ìŠµë‹ˆë‹¤.</p>
                        <p style="margin-top: 10px; font-size: 0.9em;">ìœ„ í¼ì„ ì‚¬ìš©í•˜ì—¬ í”„ë¡œí•„ì„ ì¶”ê°€í•˜ì„¸ìš”.</p>
                        <button onclick="forceLoadDemoData()" style="margin-top: 15px; padding: 10px 20px; background: #667eea; color: white; border: none; border-radius: 8px; cursor: pointer; font-weight: 600;">
                            ğŸ”„ ë°ëª¨ ë°ì´í„° ë¡œë“œí•˜ê¸°
                        </button>
                    </div>
                `;
                return;
            }
            
            console.log('í”„ë¡œí•„ í‘œì‹œ ì¤‘:', profilesToShow.length, 'ê°œ');

            profileList.innerHTML = profilesToShow.map(profile => {
                const specialty = profile.specialty || '';
                const specialtyTags = specialty ? specialty.split(',').map(s => s.trim()).filter(s => s) : [];
                const profileType = getProfileType(profile);
                const typeIcon = getTypeIcon(profileType);
                
                return `
                <div class="profile-card">
                    <h3>${typeIcon} ${escapeHtml(profile.name)}</h3>
                    ${profile.company ? `<div class="info"><strong>íšŒì‚¬/ê¸°ê´€:</strong> ${escapeHtml(profile.company)}</div>` : ''}
                    ${profile.position ? `<div class="info"><strong>ì§ì±…:</strong> ${escapeHtml(profile.position)}</div>` : ''}
                    ${specialtyTags.length > 0 ? `<div class="info"><strong>ì „ë¬¸ ë¶„ì•¼:</strong> ${specialtyTags.map(tag => `<span style="background: #e3f2fd; padding: 3px 8px; border-radius: 12px; font-size: 0.85em; margin-right: 5px;">${escapeHtml(tag)}</span>`).join('')}</div>` : ''}
                    ${profile.linkedinUrl ? `<div class="info"><strong>LinkedIn:</strong> <a href="${profile.linkedinUrl}" target="_blank">í”„ë¡œí•„ ë³´ê¸°</a></div>` : ''}
                    ${profile.notes ? `<div class="info"><strong>ì—°êµ¬ ë¶„ì•¼/ë©”ëª¨:</strong> ${escapeHtml(profile.notes)}</div>` : ''}
                    <div class="actions">
                        <button class="btn btn-edit" onclick="editProfile('${profile.id}')">ìˆ˜ì •</button>
                        <button class="btn btn-danger" onclick="deleteProfile('${profile.id}')">ì‚­ì œ</button>
                    </div>
                </div>
            `;
            }).join('');
        }

        // í”„ë¡œí•„ ì¶”ê°€/ìˆ˜ì •
        document.getElementById('profileForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const name = document.getElementById('name').value.trim();
            const company = document.getElementById('company').value.trim();
            const position = document.getElementById('position').value.trim();
            const specialty = document.getElementById('specialty').value.trim();
            const linkedinUrl = document.getElementById('linkedinUrl').value.trim();
            const notes = document.getElementById('notes').value.trim();

            if (!name) {
                alert('ì´ë¦„ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.');
                return;
            }

            if (editingId) {
                // ìˆ˜ì • ëª¨ë“œ
                const index = profiles.findIndex(p => p.id === editingId);
                if (index !== -1) {
                    profiles[index] = {
                        id: editingId,
                        name,
                        company,
                        position,
                        specialty,
                        linkedinUrl,
                        notes,
                        updatedAt: new Date().toISOString()
                    };
                }
                editingId = null;
                document.getElementById('submitBtn').textContent = 'í”„ë¡œí•„ ì €ì¥';
            } else {
                // ì¶”ê°€ ëª¨ë“œ
                const newProfile = {
                    id: Date.now().toString(),
                    name,
                    company,
                    position,
                    specialty,
                    linkedinUrl,
                    notes,
                    createdAt: new Date().toISOString()
                };
                profiles.push(newProfile);
            }

            // ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ì— ì €ì¥
            localStorage.setItem('linkedinProfiles', JSON.stringify(profiles));
            
            // í¼ ì´ˆê¸°í™”
            document.getElementById('profileForm').reset();
            
            // ëª©ë¡ ìƒˆë¡œê³ ì¹¨
            loadProfiles();
            
            // ê²€ìƒ‰ì–´ê°€ ìˆìœ¼ë©´ ê²€ìƒ‰ ê²°ê³¼ë„ ì—…ë°ì´íŠ¸
            const searchTerm = document.getElementById('searchInput').value;
            if (searchTerm) {
                searchProfiles();
            }
        });

        // í”„ë¡œí•„ ìˆ˜ì •
        function editProfile(id) {
            const profile = profiles.find(p => p.id === id);
            if (!profile) return;

            document.getElementById('name').value = profile.name;
            document.getElementById('company').value = profile.company || '';
            document.getElementById('position').value = profile.position || '';
            document.getElementById('specialty').value = profile.specialty || '';
            document.getElementById('linkedinUrl').value = profile.linkedinUrl || '';
            document.getElementById('notes').value = profile.notes || '';

            editingId = id;
            document.getElementById('submitBtn').textContent = 'í”„ë¡œí•„ ìˆ˜ì •';

            // í¼ ì„¹ì…˜ìœ¼ë¡œ ìŠ¤í¬ë¡¤
            document.querySelector('.form-section').scrollIntoView({ behavior: 'smooth' });
        }

        // í”„ë¡œí•„ ì‚­ì œ
        function deleteProfile(id) {
            if (confirm('ì •ë§ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) {
                profiles = profiles.filter(p => p.id !== id);
                localStorage.setItem('linkedinProfiles', JSON.stringify(profiles));
                loadProfiles();
                
                // ê²€ìƒ‰ì–´ê°€ ìˆìœ¼ë©´ ê²€ìƒ‰ ê²°ê³¼ë„ ì—…ë°ì´íŠ¸
                const searchTerm = document.getElementById('searchInput').value;
                if (searchTerm) {
                    searchProfiles();
                }
            }
        }

        // ê²€ìƒ‰ ê¸°ëŠ¥
        function searchProfiles() {
            const searchTerm = document.getElementById('searchInput').value.toLowerCase().trim();
            
            if (!searchTerm) {
                displayProfiles(applyFilter(profiles));
                return;
            }

            const filtered = profiles.filter(profile => 
                profile.name.toLowerCase().includes(searchTerm) ||
                (profile.company && profile.company.toLowerCase().includes(searchTerm)) ||
                (profile.position && profile.position.toLowerCase().includes(searchTerm)) ||
                (profile.specialty && profile.specialty.toLowerCase().includes(searchTerm)) ||
                (profile.notes && profile.notes.toLowerCase().includes(searchTerm))
            );

            displayProfiles(applyFilter(filtered));
        }

        document.getElementById('searchInput').addEventListener('input', searchProfiles);

        // í†µê³„ ì—…ë°ì´íŠ¸
        function updateStats() {
            document.getElementById('totalCount').textContent = profiles.length;
            
            const researcherCount = profiles.filter(p => getProfileType(p) === 'researcher' || getProfileType(p) === 'academic').length;
            const therapistCount = profiles.filter(p => getProfileType(p) === 'therapist').length;
            
            document.getElementById('researcherCount').textContent = researcherCount;
            document.getElementById('therapistCount').textContent = therapistCount;
            
            // í˜‘ì—… ê¸°íšŒ ìˆ˜ ê³„ì‚° (ì „ë¬¸ ë¶„ì•¼ê°€ ê²¹ì¹˜ëŠ” í”„ë¡œí•„)
            const collaborationCount = calculateCollaborationCount();
            document.getElementById('collaborationCount').textContent = collaborationCount;
        }

        // í˜‘ì—… ê¸°íšŒ ìˆ˜ ê³„ì‚°
        function calculateCollaborationCount() {
            if (profiles.length < 2) return 0;
            let count = 0;
            for (let i = 0; i < profiles.length; i++) {
                for (let j = i + 1; j < profiles.length; j++) {
                    if (hasCommonSpecialty(profiles[i], profiles[j])) {
                        count++;
                    }
                }
            }
            return count;
        }

        // ê³µí†µ ì „ë¬¸ ë¶„ì•¼ í™•ì¸
        function hasCommonSpecialty(profile1, profile2) {
            const specialties1 = (profile1.specialty || '').split(',').map(s => s.trim().toLowerCase()).filter(s => s);
            const specialties2 = (profile2.specialty || '').split(',').map(s => s.trim().toLowerCase()).filter(s => s);
            return specialties1.some(s => specialties2.includes(s));
        }

        // í†µê³„ & ë¶„ì„ ë¡œë“œ
        function loadAnalytics() {
            // ë„¤íŠ¸ì›Œí¬ ì¸ì‚¬ì´íŠ¸
            const insights = generateNetworkInsights();
            document.getElementById('networkInsights').textContent = insights;

            // ì „ë¬¸ ë¶„ì•¼ ì°¨íŠ¸
            const specialtyChart = document.getElementById('specialtyChart');
            const specialtyData = getSpecialtyDistribution();
            specialtyChart.innerHTML = renderBarChart(specialtyData);

            // íšŒì‚¬ ì°¨íŠ¸
            const companyChart = document.getElementById('companyChart');
            const companyData = getCompanyDistribution();
            companyChart.innerHTML = renderBarChart(companyData);

            // ì§ì±… ì°¨íŠ¸
            const positionChart = document.getElementById('positionChart');
            const positionData = getPositionDistribution();
            positionChart.innerHTML = renderBarChart(positionData);
        }

        // ë„¤íŠ¸ì›Œí¬ ì¸ì‚¬ì´íŠ¸ ìƒì„±
        function generateNetworkInsights() {
            if (profiles.length === 0) {
                return 'í”„ë¡œí•„ì„ ì¶”ê°€í•˜ë©´ ë„¤íŠ¸ì›Œí¬ ë¶„ì„ ê²°ê³¼ê°€ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤.';
            }

            const total = profiles.length;
            const researchers = profiles.filter(p => getProfileType(p) === 'researcher' || getProfileType(p) === 'academic').length;
            const therapists = profiles.filter(p => getProfileType(p) === 'therapist').length;
            const collaborations = calculateCollaborationCount();

            let insights = `í˜„ì¬ ${total}ëª…ì˜ ì „ë¬¸ê°€ê°€ ë„¤íŠ¸ì›Œí¬ì— ë“±ë¡ë˜ì–´ ìˆìŠµë‹ˆë‹¤. `;
            if (researchers > 0) {
                insights += `ì—°êµ¬ì/í•™ê³„ ì¸ì‚¬ê°€ ${researchers}ëª…, `;
            }
            if (therapists > 0) {
                insights += `ì¹˜ë£Œì‚¬/ìƒë‹´ì‚¬ê°€ ${therapists}ëª…ì…ë‹ˆë‹¤. `;
            }
            if (collaborations > 0) {
                insights += `ì „ë¬¸ ë¶„ì•¼ê°€ ê²¹ì¹˜ëŠ” í˜‘ì—… ê¸°íšŒê°€ ${collaborations}ê°œ ë°œê²¬ë˜ì—ˆìŠµë‹ˆë‹¤.`;
            } else {
                insights += 'ë‹¤ì–‘í•œ ì „ë¬¸ ë¶„ì•¼ì˜ ì „ë¬¸ê°€ë“¤ì´ ë„¤íŠ¸ì›Œí¬ì— í¬í•¨ë˜ì–´ ìˆìŠµë‹ˆë‹¤.';
            }

            return insights;
        }

        // ì „ë¬¸ ë¶„ì•¼ ë¶„í¬
        function getSpecialtyDistribution() {
            const distribution = {};
            profiles.forEach(profile => {
                const specialties = (profile.specialty || '').split(',').map(s => s.trim()).filter(s => s);
                specialties.forEach(specialty => {
                    distribution[specialty] = (distribution[specialty] || 0) + 1;
                });
            });
            return Object.entries(distribution)
                .sort((a, b) => b[1] - a[1])
                .slice(0, 10);
        }

        // íšŒì‚¬ ë¶„í¬
        function getCompanyDistribution() {
            const distribution = {};
            profiles.forEach(profile => {
                if (profile.company) {
                    distribution[profile.company] = (distribution[profile.company] || 0) + 1;
                }
            });
            return Object.entries(distribution)
                .sort((a, b) => b[1] - a[1])
                .slice(0, 10);
        }

        // ì§ì±… ë¶„í¬
        function getPositionDistribution() {
            const distribution = {};
            profiles.forEach(profile => {
                if (profile.position) {
                    distribution[profile.position] = (distribution[profile.position] || 0) + 1;
                }
            });
            return Object.entries(distribution)
                .sort((a, b) => b[1] - a[1])
                .slice(0, 10);
        }

        // ë°” ì°¨íŠ¸ ë Œë”ë§
        function renderBarChart(data) {
            if (data.length === 0) {
                return '<div style="padding: 20px; text-align: center; color: #999;">ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤.</div>';
            }

            const maxValue = Math.max(...data.map(d => d[1]));
            
            return data.map(([label, value]) => {
                const percent = maxValue > 0 ? Math.round((value / maxValue) * 100) : 0;
                return `
                    <div class="bar-item">
                        <div class="bar-label">${escapeHtml(label)}</div>
                        <div class="bar-fill" style="width: ${percent}%;">
                            ${value}ëª…
                        </div>
                    </div>
                `;
            }).join('');
        }

        // í˜‘ì—… ê¸°íšŒ ì°¾ê¸°
        function findCollaborations() {
            const mySpecialtyInput = document.getElementById('mySpecialty').value.trim();
            if (!mySpecialtyInput) {
                alert('ë‚´ ì „ë¬¸ ë¶„ì•¼ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.');
                return;
            }

            const mySpecialties = mySpecialtyInput.split(',').map(s => s.trim().toLowerCase()).filter(s => s);
            const resultsDiv = document.getElementById('collaborationResults');

            const matches = profiles.map(profile => {
                const profileSpecialties = (profile.specialty || '').split(',').map(s => s.trim().toLowerCase()).filter(s => s);
                const commonSpecialties = mySpecialties.filter(s => profileSpecialties.includes(s));
                const matchScore = commonSpecialties.length * 20; // ê³µí†µ ë¶„ì•¼ë‹¹ 20ì 

                return {
                    profile,
                    matchScore,
                    commonSpecialties
                };
            })
            .filter(m => m.matchScore > 0)
            .sort((a, b) => b.matchScore - a.matchScore)
            .slice(0, 10);

            if (matches.length === 0) {
                resultsDiv.innerHTML = `
                    <div class="empty-state">
                        <p>í˜‘ì—… ê¸°íšŒê°€ ë°œê²¬ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.</p>
                        <p style="margin-top: 10px; font-size: 0.9em;">ë‹¤ë¥¸ ì „ë¬¸ ë¶„ì•¼ë¡œ ì‹œë„í•´ë³´ì„¸ìš”.</p>
                    </div>
                `;
                return;
            }

            resultsDiv.innerHTML = matches.map(match => {
                const specialtyTags = match.commonSpecialties.map(s => 
                    `<span style="background: #4caf50; color: white; padding: 3px 8px; border-radius: 12px; font-size: 0.85em; margin-right: 5px;">${escapeHtml(s)}</span>`
                ).join('');
                
                return `
                    <div class="collaboration-match">
                        <h4>
                            ${escapeHtml(match.profile.name)}
                            <span class="match-score">${match.matchScore}% ë§¤ì¹­</span>
                        </h4>
                        ${match.profile.company ? `<div style="color: #666; margin-bottom: 5px;"><strong>íšŒì‚¬:</strong> ${escapeHtml(match.profile.company)}</div>` : ''}
                        ${match.profile.position ? `<div style="color: #666; margin-bottom: 5px;"><strong>ì§ì±…:</strong> ${escapeHtml(match.profile.position)}</div>` : ''}
                        <div style="margin-top: 10px;">
                            <strong>ê³µí†µ ì „ë¬¸ ë¶„ì•¼:</strong> ${specialtyTags}
                        </div>
                        ${match.profile.linkedinUrl ? `<div style="margin-top: 10px;"><a href="${match.profile.linkedinUrl}" target="_blank" style="color: #0077b5; font-weight: 600;">LinkedIn í”„ë¡œí•„ ë³´ê¸° â†’</a></div>` : ''}
                    </div>
                `;
            }).join('');
        }

        // í›„ì† ì¡°ì¹˜ í”„ë¡œí•„ ì„ íƒ ì—…ë°ì´íŠ¸
        function updateActionProfileSelect() {
            const select = document.getElementById('actionProfile');
            select.innerHTML = '<option value="">í”„ë¡œí•„ ì„ íƒ...</option>';
            profiles.forEach(profile => {
                const option = document.createElement('option');
                option.value = profile.id;
                option.textContent = profile.name + (profile.company ? ` (${profile.company})` : '');
                select.appendChild(option);
            });
        }

        // í›„ì† ì¡°ì¹˜ ì¶”ê°€
        function addAction() {
            const profileId = document.getElementById('actionProfile').value;
            const actionType = document.getElementById('actionType').value;
            const actionDate = document.getElementById('actionDate').value;
            const actionContent = document.getElementById('actionContent').value.trim();

            if (!profileId) {
                alert('í”„ë¡œí•„ì„ ì„ íƒí•´ì£¼ì„¸ìš”.');
                return;
            }

            if (!actionDate) {
                alert('ë‚ ì§œë¥¼ ì„ íƒí•´ì£¼ì„¸ìš”.');
                return;
            }

            if (!actionContent) {
                alert('ë‚´ìš©ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.');
                return;
            }

            const actions = JSON.parse(localStorage.getItem('profileActions') || '[]');
            const action = {
                id: Date.now().toString(),
                profileId,
                type: actionType,
                date: actionDate,
                content: actionContent,
                createdAt: new Date().toISOString()
            };

            actions.push(action);
            localStorage.setItem('profileActions', JSON.stringify(actions));

            // í¼ ì´ˆê¸°í™”
            document.getElementById('actionDate').value = '';
            document.getElementById('actionContent').value = '';

            loadActions();
        }

        // í›„ì† ì¡°ì¹˜ ëª©ë¡ ë¡œë“œ
        function loadActions() {
            const actions = JSON.parse(localStorage.getItem('profileActions') || '[]');
            const actionsList = document.getElementById('actionsList');

            if (actions.length === 0) {
                actionsList.innerHTML = `
                    <div class="empty-state">
                        <p>ë“±ë¡ëœ í›„ì† ì¡°ì¹˜ê°€ ì—†ìŠµë‹ˆë‹¤.</p>
                    </div>
                `;
                return;
            }

            // ë‚ ì§œìˆœ ì •ë ¬ (ìµœì‹ ìˆœ)
            const sortedActions = actions.sort((a, b) => new Date(b.date) - new Date(a.date));

            actionsList.innerHTML = sortedActions.map(action => {
                const profile = profiles.find(p => p.id === action.profileId);
                const typeLabels = {
                    'meeting': 'ë¯¸íŒ…/íšŒì˜',
                    'email': 'ì´ë©”ì¼',
                    'call': 'ì „í™”',
                    'followup': 'í›„ì† ì¡°ì¹˜',
                    'note': 'ë©”ëª¨'
                };

                return `
                    <div class="action-item">
                        <div class="date">${new Date(action.date).toLocaleDateString('ko-KR')}</div>
                        <h4 style="color: #333; margin-bottom: 8px;">
                            ${profile ? escapeHtml(profile.name) : 'ì•Œ ìˆ˜ ì—†ìŒ'}
                            <span style="background: #667eea; color: white; padding: 3px 8px; border-radius: 12px; font-size: 0.8em; margin-left: 8px;">
                                ${typeLabels[action.type] || action.type}
                            </span>
                        </h4>
                        <p style="color: #666; line-height: 1.6;">${escapeHtml(action.content)}</p>
                        <button class="btn btn-danger" onclick="deleteAction('${action.id}')" style="margin-top: 10px; padding: 5px 15px; font-size: 0.9em;">ì‚­ì œ</button>
                    </div>
                `;
            }).join('');
        }

        // í›„ì† ì¡°ì¹˜ ì‚­ì œ
        function deleteAction(actionId) {
            if (confirm('ì´ í›„ì† ì¡°ì¹˜ë¥¼ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) {
                const actions = JSON.parse(localStorage.getItem('profileActions') || '[]');
                const filtered = actions.filter(a => a.id !== actionId);
                localStorage.setItem('profileActions', JSON.stringify(filtered));
                loadActions();
            }
        }

        // ë°ì´í„° ë‚´ë³´ë‚´ê¸°
        function exportData(format) {
            if (profiles.length === 0) {
                alert('ë‚´ë³´ë‚¼ í”„ë¡œí•„ì´ ì—†ìŠµë‹ˆë‹¤.');
                return;
            }

            if (format === 'json') {
                const dataStr = JSON.stringify(profiles, null, 2);
                const dataBlob = new Blob([dataStr], { type: 'application/json' });
                const url = URL.createObjectURL(dataBlob);
                const link = document.createElement('a');
                link.href = url;
                link.download = `mindconnect-profiles-${new Date().toISOString().split('T')[0]}.json`;
                link.click();
                URL.revokeObjectURL(url);
            } else if (format === 'csv') {
                const headers = ['ì´ë¦„', 'íšŒì‚¬', 'ì§ì±…', 'ì „ë¬¸ ë¶„ì•¼', 'LinkedIn URL', 'ë©”ëª¨'];
                const rows = profiles.map(p => [
                    p.name || '',
                    p.company || '',
                    p.position || '',
                    p.specialty || '',
                    p.linkedinUrl || '',
                    (p.notes || '').replace(/\n/g, ' ')
                ]);

                const csvContent = [
                    headers.join(','),
                    ...rows.map(row => row.map(cell => `"${cell.replace(/"/g, '""')}"`).join(','))
                ].join('\n');

                const dataBlob = new Blob(['\uFEFF' + csvContent], { type: 'text/csv;charset=utf-8;' });
                const url = URL.createObjectURL(dataBlob);
                const link = document.createElement('a');
                link.href = url;
                link.download = `mindconnect-profiles-${new Date().toISOString().split('T')[0]}.csv`;
                link.click();
                URL.revokeObjectURL(url);
            }
        }

        // ë°ì´í„° ê°€ì ¸ì˜¤ê¸°
        function importData() {
            const fileInput = document.getElementById('importFile');
            const file = fileInput.files[0];

            if (!file) {
                alert('íŒŒì¼ì„ ì„ íƒí•´ì£¼ì„¸ìš”.');
                return;
            }

            const reader = new FileReader();
            reader.onload = function(e) {
                try {
                    const imported = JSON.parse(e.target.result);
                    if (!Array.isArray(imported)) {
                        throw new Error('ì˜ëª»ëœ ë°ì´í„° í˜•ì‹ì…ë‹ˆë‹¤.');
                    }

                    if (confirm(`${imported.length}ê°œì˜ í”„ë¡œí•„ì„ ê°€ì ¸ì˜¤ì‹œê² ìŠµë‹ˆê¹Œ? ê¸°ì¡´ ë°ì´í„°ëŠ” ìœ ì§€ë©ë‹ˆë‹¤.`)) {
                        // ì¤‘ë³µ ì œê±° (ID ê¸°ì¤€)
                        const existingIds = new Set(profiles.map(p => p.id));
                        const newProfiles = imported.filter(p => !existingIds.has(p.id));
                        profiles = [...profiles, ...newProfiles];
                        localStorage.setItem('linkedinProfiles', JSON.stringify(profiles));
                        loadProfiles();
                        alert(`${newProfiles.length}ê°œì˜ í”„ë¡œí•„ì´ ì¶”ê°€ë˜ì—ˆìŠµë‹ˆë‹¤.`);
                        fileInput.value = '';
                    }
                } catch (error) {
                    alert('íŒŒì¼ì„ ì½ëŠ” ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤: ' + error.message);
                }
            };
            reader.readAsText(file);
        }

        // ëª¨ë“  ë°ì´í„° ì‚­ì œ
        function clearAllData() {
            if (confirm('ì •ë§ ëª¨ë“  í”„ë¡œí•„ ë°ì´í„°ë¥¼ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ? ì´ ì‘ì—…ì€ ë˜ëŒë¦´ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.')) {
                if (confirm('ë§ˆì§€ë§‰ í™•ì¸: ëª¨ë“  ë°ì´í„°ë¥¼ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) {
                    profiles = [];
                    localStorage.removeItem('linkedinProfiles');
                    localStorage.removeItem('profileActions');
                    loadProfiles();
                    alert('ëª¨ë“  ë°ì´í„°ê°€ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.');
                }
            }
        }

        // í”„ë¡œí•„ íƒ€ì… íŒë³„
        function getProfileType(profile) {
            const position = (profile.position || '').toLowerCase();
            const company = (profile.company || '').toLowerCase();
            const specialty = (profile.specialty || '').toLowerCase();
            const notes = (profile.notes || '').toLowerCase();
            
            // í•™ê³„ íŒë³„ (ê°€ì¥ ìš°ì„ )
            if (position.includes('êµìˆ˜') || position.includes('professor') || 
                position.includes('assistant professor') || position.includes('associate professor') ||
                company.includes('ëŒ€í•™') || company.includes('university') || 
                company.includes('college') || company.includes('í•™êµ')) {
                return 'academic';
            }
            
            // ì¹˜ë£Œì‚¬/ìƒë‹´ì‚¬ íŒë³„
            if (position.includes('ì¹˜ë£Œ') || position.includes('ìƒë‹´') || 
                position.includes('therapist') || position.includes('counselor') ||
                position.includes('psychologist') || position.includes('ì‹¬ë¦¬ì‚¬') ||
                specialty.includes('ì„ìƒ') || specialty.includes('ìƒë‹´') ||
                specialty.includes('clinical') || specialty.includes('counseling')) {
                return 'therapist';
            }
            
            // ì—°êµ¬ì íŒë³„
            if (position.includes('ì—°êµ¬') || position.includes('research') ||
                position.includes('ì—°êµ¬ì›') || position.includes('researcher') ||
                position.includes('ì—°êµ¬ì†Œ') || company.includes('research') ||
                notes.includes('ì—°êµ¬') || notes.includes('research')) {
                return 'researcher';
            }
            
            return 'other';
        }

        // íƒ€ì… ì•„ì´ì½˜
        function getTypeIcon(type) {
            const icons = {
                'academic': 'ğŸ“',
                'researcher': 'ğŸ”¬',
                'therapist': 'ğŸ’š',
                'other': 'ğŸ‘¤'
            };
            return icons[type] || icons['other'];
        }

        // í•„í„° ì ìš©
        function applyFilter(profilesToFilter) {
            if (currentFilter === 'all') {
                return profilesToFilter;
            }
            
            return profilesToFilter.filter(profile => {
                const type = getProfileType(profile);
                if (currentFilter === 'researcher') {
                    return type === 'researcher' || type === 'academic';
                }
                if (currentFilter === 'therapist') {
                    return type === 'therapist';
                }
                if (currentFilter === 'academic') {
                    return type === 'academic';
                }
                return true;
            });
        }

        // í•„í„° ë²„íŠ¼ í´ë¦­
        function filterByType(type) {
            currentFilter = type;
            
            // ë²„íŠ¼ ìŠ¤íƒ€ì¼ ì—…ë°ì´íŠ¸
            document.querySelectorAll('.btn-secondary').forEach(btn => {
                btn.style.background = '#f0f0f0';
                btn.style.color = '#333';
            });
            document.getElementById('filter' + type.charAt(0).toUpperCase() + type.slice(1)).style.background = '#667eea';
            document.getElementById('filter' + type.charAt(0).toUpperCase() + type.slice(1)).style.color = 'white';
            
            // ê²€ìƒ‰ì–´ê°€ ìˆìœ¼ë©´ ê²€ìƒ‰ ê²°ê³¼ì— í•„í„° ì ìš©
            const searchTerm = document.getElementById('searchInput').value.toLowerCase().trim();
            if (searchTerm) {
                const filtered = profiles.filter(profile => 
                    profile.name.toLowerCase().includes(searchTerm) ||
                    (profile.company && profile.company.toLowerCase().includes(searchTerm)) ||
                    (profile.position && profile.position.toLowerCase().includes(searchTerm)) ||
                    (profile.specialty && profile.specialty.toLowerCase().includes(searchTerm)) ||
                    (profile.notes && profile.notes.toLowerCase().includes(searchTerm))
                );
                displayProfiles(applyFilter(filtered));
            } else {
                displayProfiles(applyFilter(profiles));
            }
        }

        // XSS ë°©ì§€
        function escapeHtml(text) {
            const div = document.createElement('div');
            div.textContent = text;
            return div.innerHTML;
        }

        // LinkedIn ì •ë³´ ê°€ì ¸ì˜¤ê¸°
        async function fetchLinkedInInfo() {
            const urlInput = document.getElementById('quickLinkedInUrl');
            const url = urlInput.value.trim();
            const fetchBtn = document.getElementById('fetchBtn');
            
            if (!url) {
                alert('LinkedIn URLì„ ì…ë ¥í•´ì£¼ì„¸ìš”.');
                return;
            }

            // LinkedIn URL í˜•ì‹ ê²€ì¦
            if (!url.includes('linkedin.com/in/')) {
                alert('ì˜¬ë°”ë¥¸ LinkedIn í”„ë¡œí•„ URLì„ ì…ë ¥í•´ì£¼ì„¸ìš”.\nì˜ˆ: https://linkedin.com/in/username');
                return;
            }

            // ë²„íŠ¼ ë¡œë”© ìƒíƒœ
            const originalText = fetchBtn.innerHTML;
            fetchBtn.innerHTML = '<span class="loading"></span> ê°€ì ¸ì˜¤ëŠ” ì¤‘...';
            fetchBtn.disabled = true;

            try {
                // URLì—ì„œ ì‚¬ìš©ì ì´ë¦„ ì¶”ì¶œ
                const urlMatch = url.match(/linkedin\.com\/in\/([^\/\?]+)/);
                const username = urlMatch ? urlMatch[1] : '';
                
                if (!username) {
                    alert('LinkedIn URL í˜•ì‹ì´ ì˜¬ë°”ë¥´ì§€ ì•ŠìŠµë‹ˆë‹¤.');
                    fetchBtn.innerHTML = originalText;
                    fetchBtn.disabled = false;
                    return;
                }

                // ì—¬ëŸ¬ CORS í”„ë¡ì‹œë¥¼ í†µí•´ ì •ë³´ ê°€ì ¸ì˜¤ê¸° ì‹œë„
                const proxies = [
                    `https://api.allorigins.win/get?url=${encodeURIComponent(url)}`,
                    `https://api.codetabs.com/v1/proxy?quest=${encodeURIComponent(url)}`
                ];

                let extractedInfo = {
                    name: null,
                    company: null,
                    position: null
                };

                // ê° í”„ë¡ì‹œë¥¼ ìˆœì°¨ì ìœ¼ë¡œ ì‹œë„
                for (const proxyUrl of proxies) {
                    try {
                        const response = await fetch(proxyUrl, {
                            method: 'GET',
                            headers: {
                                'Accept': 'text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8',
                                'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36'
                            }
                        });
                        
                        let html = '';
                        if (proxyUrl.includes('allorigins')) {
                            const data = await response.json();
                            html = data.contents || '';
                        } else {
                            html = await response.text();
                        }

                        if (html && html.length > 100) {
                            // HTMLì—ì„œ ì´ë¦„ ì¶”ì¶œ (ì—¬ëŸ¬ íŒ¨í„´ ì‹œë„)
                            const namePatterns = [
                                /<title>([^<]+)\s*[-|]\s*LinkedIn/i,
                                /<meta\s+property="og:title"\s+content="([^"]+)"/i,
                                /"firstName":"([^"]+)"/i,
                                /<h1[^>]*class="[^"]*text-heading-xlarge[^"]*"[^>]*>([^<]+)<\/h1>/i
                            ];
                            
                            for (const pattern of namePatterns) {
                                const match = html.match(pattern);
                                if (match && match[1]) {
                                    let name = match[1].trim()
                                        .replace(/\s*[-|]\s*LinkedIn.*/i, '')
                                        .replace(/\s+/g, ' ');
                                    if (name && name.length < 50) {
                                        extractedInfo.name = name;
                                        break;
                                    }
                                }
                            }

                            // íšŒì‚¬/ì§ì±… ì¶”ì¶œ ì‹œë„
                            const companyPatterns = [
                                /"companyName":"([^"]+)"/i,
                                /<div[^>]*class="[^"]*text-body-medium[^"]*"[^>]*>([^<]+)<\/div>/gi
                            ];
                            
                            for (const pattern of companyPatterns) {
                                const matches = [...html.matchAll(pattern)];
                                if (matches.length > 0) {
                                    for (const match of matches.slice(0, 3)) {
                                        const text = match[1]?.trim();
                                        if (text && !text.includes('LinkedIn') && text.length < 100 && text.length > 2) {
                                            if (!extractedInfo.company) {
                                                extractedInfo.company = text;
                                            } else if (!extractedInfo.position) {
                                                extractedInfo.position = text;
                                            }
                                        }
                                    }
                                    if (extractedInfo.company) break;
                                }
                            }

                            // ì •ë³´ë¥¼ ì¼ë¶€ë¼ë„ ê°€ì ¸ì™”ìœ¼ë©´ ì„±ê³µìœ¼ë¡œ ê°„ì£¼
                            if (extractedInfo.name || extractedInfo.company) {
                                break;
                            }
                        }
                    } catch (proxyError) {
                        console.log(`í”„ë¡ì‹œ ì‹œë„ ì‹¤íŒ¨:`, proxyError);
                        continue; // ë‹¤ìŒ í”„ë¡ì‹œ ì‹œë„
                    }
                }

                // URLì„ linkedinUrl í•„ë“œì— ìë™ ì…ë ¥
                document.getElementById('linkedinUrl').value = url;

                // ì¶”ì¶œëœ ì •ë³´ë¥¼ í¼ì— ìë™ ì…ë ¥
                if (extractedInfo.name) {
                    document.getElementById('name').value = extractedInfo.name;
                }
                if (extractedInfo.company) {
                    document.getElementById('company').value = extractedInfo.company;
                }
                if (extractedInfo.position) {
                    document.getElementById('position').value = extractedInfo.position;
                }

                // ê²°ê³¼ ë©”ì‹œì§€
                if (extractedInfo.name || extractedInfo.company) {
                    const infoText = [
                        extractedInfo.name ? `ì´ë¦„: ${extractedInfo.name}` : '',
                        extractedInfo.company ? `íšŒì‚¬: ${extractedInfo.company}` : '',
                        extractedInfo.position ? `ì§ì±…: ${extractedInfo.position}` : ''
                    ].filter(Boolean).join('\n');
                    
                    alert(`âœ… LinkedIn í”„ë¡œí•„ ì •ë³´ë¥¼ ê°€ì ¸ì™”ìŠµë‹ˆë‹¤!\n\n${infoText}\n\nì •ë³´ë¥¼ í™•ì¸í•˜ê³  ìˆ˜ì •í•œ í›„ ì €ì¥í•´ì£¼ì„¸ìš”.`);
                } else {
                    // ì •ë³´ë¥¼ ê°€ì ¸ì˜¤ì§€ ëª»í•œ ê²½ìš°
                    alert(`LinkedIn URLì´ ì…ë ¥ë˜ì—ˆìŠµë‹ˆë‹¤!\n\nâš ï¸ ìë™ìœ¼ë¡œ ì •ë³´ë¥¼ ê°€ì ¸ì˜¤ì§€ ëª»í–ˆìŠµë‹ˆë‹¤.\n\nğŸ’¡ íŒ:\n1. LinkedIn í”„ë¡œí•„ í˜ì´ì§€ë¥¼ ì—´ì–´ì£¼ì„¸ìš”\n2. ì´ë¦„, íšŒì‚¬, ì§ì±… ì •ë³´ë¥¼ ë³µì‚¬í•´ì„œ ë¶™ì—¬ë„£ìœ¼ì„¸ìš”\n3. ë˜ëŠ” ìˆ˜ë™ìœ¼ë¡œ ì •ë³´ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”\n\nğŸ“ ì°¸ê³ : LinkedInì€ ë³´ì•ˆ ì •ì±…ìœ¼ë¡œ ì¸í•´ ìë™ ì •ë³´ ê°€ì ¸ì˜¤ê¸°ê°€ ì œí•œë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.`);
                }
                
                // ì´ë¦„ í•„ë“œì— í¬ì»¤ìŠ¤
                if (!extractedInfo.name) {
                    document.getElementById('name').focus();
                }
                
            } catch (error) {
                console.error('LinkedIn ì •ë³´ ê°€ì ¸ì˜¤ê¸° ì˜¤ë¥˜:', error);
                document.getElementById('linkedinUrl').value = url;
                alert('LinkedIn ì •ë³´ë¥¼ ê°€ì ¸ì˜¤ëŠ” ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.\n\nìˆ˜ë™ìœ¼ë¡œ ì •ë³´ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.\n\nğŸ“ ì°¸ê³ : LinkedInì€ ë³´ì•ˆ ì •ì±…ìœ¼ë¡œ ì¸í•´ ìë™ ì •ë³´ ê°€ì ¸ì˜¤ê¸°ê°€ ì œí•œë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.');
            } finally {
                fetchBtn.innerHTML = originalText;
                fetchBtn.disabled = false;
                urlInput.value = '';
            }
        }

        // Enter í‚¤ë¡œ ì •ë³´ ê°€ì ¸ì˜¤ê¸°
        document.getElementById('quickLinkedInUrl').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                e.preventDefault();
                fetchLinkedInInfo();
            }
        });

        // ì´ˆê¸° ë¡œë“œ - DOMì´ ì™„ì „íˆ ë¡œë“œëœ í›„ ì‹¤í–‰
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', function() {
                setTimeout(function() {
                    loadProfiles();
                    // í•„í„° ë²„íŠ¼ ì´ˆê¸° ìŠ¤íƒ€ì¼
                    const filterAll = document.getElementById('filterAll');
                    if (filterAll) {
                        filterAll.style.background = '#667eea';
                        filterAll.style.color = 'white';
                    }
                }, 100);
            });
        } else {
            setTimeout(function() {
                loadProfiles();
                // í•„í„° ë²„íŠ¼ ì´ˆê¸° ìŠ¤íƒ€ì¼
                const filterAll = document.getElementById('filterAll');
                if (filterAll) {
                    filterAll.style.background = '#667eea';
                    filterAll.style.color = 'white';
                }
            }, 100);
        }
    </script>
</body>
</html>

